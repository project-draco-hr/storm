{
  Logger.getRootLogger().setLevel(Level.ERROR);
  DirLockingThread[] thds=startThreads(10,lockDir);
  for (  DirLockingThread thd : thds) {
    thd.start();
  }
  System.err.println("Thread creation complete");
  Thread.sleep(5000);
  for (  DirLockingThread thd : thds) {
    thd.join(1000);
    if (thd.isAlive() && thd.cleanExit)     System.err.println(thd.getName() + " did not exit cleanly");
    Assert.assertTrue(thd.cleanExit);
  }
  Path lockFile=new Path(lockDir + Path.SEPARATOR + DirLock.DIR_LOCK_FILE);
  Assert.assertFalse(fs.exists(lockFile));
}
