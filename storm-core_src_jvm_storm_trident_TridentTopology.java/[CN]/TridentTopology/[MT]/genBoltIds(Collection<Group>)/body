{
  Map<Group,String> ret=new HashMap();
  final Map<Group,String> groupNames=new HashMap();
  for (  Group g : groups) {
    String name=getGroupName(g);
    groupNames.put(g,name == null ? "" : name);
  }
  List<Group> groupList=new ArrayList(groups);
  Collections.sort(groupList,new Comparator<Group>(){
    @Override public int compare(    Group o1,    Group o2){
      return groupNames.get(o1).compareTo(groupNames.get(o2));
    }
  }
);
  int ctr=0;
  for (  Group g : groupList) {
    if (!isSpoutGroup(g)) {
      List<String> name=new ArrayList();
      name.add("b");
      name.add("" + ctr);
      String groupName=groupNames.get(g);
      if (groupName != null && !groupName.isEmpty()) {
        name.add(groupName);
      }
      ret.put(g,Utils.join(name,"-"));
      ctr++;
    }
  }
  return ret;
}
