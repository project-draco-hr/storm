{
  LOG.info("Getting metrics for connection to " + remote_addr);
  HashMap<String,Object> ret=new HashMap<String,Object>();
  ret.put("reconnects",totalReconnects.getAndSet(0));
  ret.put("sent",messagesSent.getAndSet(0));
  ret.put("pending",pendings.get());
  ret.put("lostOnSend",messagesLostReconnect.getAndSet(0));
  ret.put("dest",remote_addr.toString());
  Channel c=channelRef.get();
  if (c != null) {
    SocketAddress address=c.getLocalAddress();
    if (address != null) {
      ret.put("src",address.toString());
    }
  }
  return ret;
}
