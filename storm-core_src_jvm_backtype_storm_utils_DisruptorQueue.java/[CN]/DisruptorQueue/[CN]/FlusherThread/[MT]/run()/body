{
  try {
    long nextFlushTime=System.currentTimeMillis();
    while (!_done) {
      long now=System.currentTimeMillis();
      if (now >= nextFlushTime) {
        for (        ThreadLocalBatcher batcher : _batchers.values()) {
          batcher.forceBatch();
          batcher.flush(true);
        }
        nextFlushTime=now + _flushInterval;
      }
 else {
        Thread.sleep(nextFlushTime - now);
      }
    }
  }
 catch (  InterruptedException e) {
  }
}
