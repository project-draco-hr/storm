{
  Map conf=ConfigUtils.readStormConfig();
  conf.put(Config.STORM_LOCAL_DIR,new File((String)conf.get(Config.STORM_LOCAL_DIR)).getCanonicalPath());
  SupervisorData supervisorData=new SupervisorData(conf,null,new StandaloneSupervisor());
  IWorkerManager workerManager=supervisorData.getWorkerManager();
  Collection<String> workerIds=SupervisorUtils.supervisorWorkerIds(conf);
  String supervisorId=supervisorData.getSupervisorId();
  Map<String,String> workerToThreadPids=supervisorData.getWorkerThreadPids();
  ConcurrentHashSet deadWorkers=supervisorData.getDeadWorkers();
  for (  String workerId : workerIds) {
    LOG.info("Killing worker: {} through CLI.",workerId);
    workerManager.shutdownWorker(supervisorId,workerId,workerToThreadPids);
    if (workerManager.cleanupWorker(workerId)) {
      deadWorkers.remove(workerId);
    }
  }
}
