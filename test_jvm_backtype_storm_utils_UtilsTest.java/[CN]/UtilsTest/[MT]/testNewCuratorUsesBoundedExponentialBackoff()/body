{
  @SuppressWarnings("unchecked") Map<String,Object> conf=(Map<String,Object>)Utils.readDefaultConfig();
  final int ArbitraryInterval=24;
  final int ArbitraryRetries=4;
  conf.put(Config.STORM_ZOOKEEPER_RETRY_INTERVAL,ArbitraryInterval);
  conf.put(Config.STORM_ZOOKEEPER_RETRY_TIMES,ArbitraryRetries);
  List<String> servers=new ArrayList<String>();
  servers.add("bogus_server");
  Object port=new Integer(42);
  CuratorFramework cf=Utils.newCurator(conf,servers,port);
  assertTrue(cf.getZookeeperClient().getRetryPolicy() instanceof ExponentialBackoffRetry);
  ExponentialBackoffRetry retry=(ExponentialBackoffRetry)cf.getZookeeperClient().getRetryPolicy();
  assertEquals(retry.getBaseSleepTimeMs(),ArbitraryInterval);
  assertEquals(retry.getN(),ArbitraryRetries);
}
