{
  File destDir=new File(dirPath);
  LOG.info("Generating torrent for directory: {}",destDir.getAbsolutePath());
  URI uri=URI.create("http://" + this.hostName + ":"+ this.port+ "/announce");
  LOG.info("Creating torrent with announce URL: {}",uri);
  ArrayList<File> files=new ArrayList<File>();
  files.add(new File(destDir,"stormjar.jar"));
  files.add(new File(destDir,"stormconf.ser"));
  files.add(new File(destDir,"stormcode.ser"));
  Torrent torrent=Torrent.create(destDir,files,uri,"storm-nimbus");
  File torrentFile=new File(destDir,topologyId + ".torrent");
  torrent.save(new FileOutputStream(torrentFile));
  LOG.info("Saved torrent: {}" + torrentFile.getAbsolutePath());
  this.tracker.announce(new TrackedTorrent(torrent));
  LOG.info("Torrent announced to tracker.");
  Client client=new Client(host,new SharedTorrent(torrent,destDir.getParentFile(),true));
  this.clients.put(topologyId,client);
  rebalanceRates();
  client.share();
  LOG.info("Seeding torrent...");
  return torrentFile;
}
