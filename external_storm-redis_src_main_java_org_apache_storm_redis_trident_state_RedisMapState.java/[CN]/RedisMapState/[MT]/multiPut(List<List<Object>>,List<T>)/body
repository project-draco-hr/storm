{
  if (keys.size() == 0) {
    return;
  }
  if (Strings.isNullOrEmpty(this.options.hkey)) {
    JedisCommands jedisCommands=null;
    try {
      jedisCommands=container.getInstance();
      if (jedisCommands instanceof Jedis) {
        String[] keyValue=buildKeyValuesList(keys,vals);
        ((Jedis)jedisCommands).mset(keyValue);
      }
 else {
        for (int i=0; i < keys.size(); i++) {
          String val=new String(serializer.serialize(vals.get(i)));
          String redisKey=keyFactory.build(keys.get(i));
          jedisCommands.set(redisKey,val);
        }
      }
    }
  finally {
      if (jedisCommands != null) {
        container.returnInstance(jedisCommands);
      }
    }
  }
 else {
    JedisCommands jedisCommands=null;
    try {
      jedisCommands=container.getInstance();
      for (int i=0; i < keys.size(); i++) {
        String val=new String(serializer.serialize(vals.get(i)));
        String redisKey=keyFactory.build(keys.get(i));
        jedisCommands.hset(this.options.hkey,redisKey,val);
      }
    }
  finally {
      if (jedisCommands != null) {
        container.returnInstance(jedisCommands);
      }
    }
  }
}
