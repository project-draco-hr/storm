{
  LOG.info("Starting supervisor for storm version '{}'.",VersionInfo.getVersion());
  SupervisorManager supervisorManager;
  try {
    Map<Object,Object> conf=Utils.readStormConfig();
    if (ConfigUtils.isLocalMode(conf)) {
      throw new IllegalArgumentException("Cannot start server in local mode!");
    }
    supervisorManager=mkSupervisor(conf,null,iSupervisor);
    if (supervisorManager != null)     Utils.addShutdownHookWithForceKillIn1Sec(supervisorManager);
    registerWorkerNumGauge("supervisor:num-slots-used-gauge",conf);
    StormMetricsRegistry.startMetricsReporters(conf);
  }
 catch (  Exception e) {
    LOG.error("Failed to start supervisor\n",e);
    System.exit(1);
  }
}
