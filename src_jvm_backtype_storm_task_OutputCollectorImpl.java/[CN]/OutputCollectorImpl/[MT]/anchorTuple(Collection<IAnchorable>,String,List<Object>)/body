{
  Map<Long,Long> anchorsToIds=new HashMap<Long,Long>();
  if (anchors != null) {
    for (    IAnchorable anchor : anchors) {
      long newId=MessageId.generateId();
      getExistingOutput(anchor).add(newId);
      for (      long root : anchor.getMessageId().getAnchorsToIds().keySet()) {
        Long curr=anchorsToIds.get(root);
        if (curr == null)         curr=0L;
        anchorsToIds.put(root,curr ^ newId);
      }
    }
  }
  return new Tuple(_context,tuple,_context.getThisTaskId(),streamId,MessageId.makeId(anchorsToIds));
}
