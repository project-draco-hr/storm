{
  long start=System.currentTimeMillis();
  Message message=receiver.receive(timeoutInMilliseconds);
  long end=System.currentTimeMillis();
  long millis=(end - start);
  receiveApiLatencyMean.update(millis);
  receiveApiCallCount.incr();
  if (message == null) {
    if (timeoutInMilliseconds > 100 && millis < timeoutInMilliseconds / 2) {
      throw new RuntimeException("Restart EventHubSpout due to failure of receiving messages in " + millis + " millisecond");
    }
    return null;
  }
  receiveMessageCount.incr();
  MessageId messageId=createMessageId(message);
  return EventData.create(message,messageId);
}
