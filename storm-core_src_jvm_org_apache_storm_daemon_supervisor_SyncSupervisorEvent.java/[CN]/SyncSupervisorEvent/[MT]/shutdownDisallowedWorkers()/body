{
  Map conf=supervisorData.getConf();
  LocalState localState=supervisorData.getLocalState();
  Map<Integer,LocalAssignment> assignedExecutors=localState.getLocalAssignmentsMap();
  if (assignedExecutors == null) {
    assignedExecutors=new HashMap<>();
  }
  int now=Time.currentTimeSecs();
  SyncProcessEvent syncProcesses=new SyncProcessEvent(supervisorData);
  Map<String,StateHeartbeat> workerIdHbstate=syncProcesses.getLocalWorkerStats(assignedExecutors,now);
  LOG.debug("Allocated workers ",assignedExecutors);
  for (  Map.Entry<String,StateHeartbeat> entry : workerIdHbstate.entrySet()) {
    String workerId=entry.getKey();
    StateHeartbeat stateHeartbeat=entry.getValue();
    if (stateHeartbeat.getState() == State.disallowed) {
      syncProcesses.shutWorker(supervisorData,workerId);
      LOG.debug("{}'s state disallowed, so shutdown this worker");
    }
  }
}
