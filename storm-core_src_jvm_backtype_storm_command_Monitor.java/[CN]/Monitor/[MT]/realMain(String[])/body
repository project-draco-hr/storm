{
  CmdLineParser parser=new CmdLineParser(this);
  parser.setUsageWidth(80);
  try {
    parser.parseArgument(args);
  }
 catch (  CmdLineException e) {
    System.err.println(e.getMessage());
    _help=true;
  }
  if (_help) {
    parser.printUsage(System.err);
    System.err.println();
    return;
  }
  if (_name == null || _name.isEmpty()) {
    throw new IllegalArgumentException("topology name must be something");
  }
  if (_component == null || _component.isEmpty()) {
    throw new IllegalArgumentException("component name must be something");
  }
  if (_interval <= 0) {
    throw new IllegalArgumentException("poll interval must be positive");
  }
  if (!"transferred".equals(_stat) && !"emitted".equals(_stat)) {
    throw new IllegalArgumentException("stat item must either be transferred or emitted");
  }
  Map clusterConf=Utils.readStormConfig();
  clusterConf.putAll(Utils.readCommandLineOpts());
  Nimbus.Client client=NimbusClient.getConfiguredClient(clusterConf).getClient();
  try {
    metrics(client,_interval,_name,_component,_stat);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
